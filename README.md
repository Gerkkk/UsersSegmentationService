## Сервис для сегментации пользователей

#### Ссылка на GitHub с решением:
https://github.com/Gerkkk/UsersSegmentationService

#### Задание

VK — компания, которая опирается на данные и использует доказательные подходы и методы. Мы регулярно проводим исследования, тестирования и работаем над возникающими ошибками. 

Сейчас перед одной из команд стоит задача разработать сервис, хранящий данные пользователей и сегменты, к которым пользователи относятся. Сервис должен обеспечивать создание, изменение, удаление сегментов, а также добавление и удаление пользователей в сегменты. 

Допустим, что мы хотим провести ряд экспериментов и протестировать новые функции почты:
— голосовые сообщения; 

— скидку 30% на подписку в облаке; 

— использование GPT в письмах. 

Под это можно выделить сегменты:

```
MAIL_VOICE_MESSAGES;

CLOUD_DISCOUNT_30;

MAIL_GPT.
```

* Необходимо реализовать функции создания, удаления и редактирования сегментов, а также распределение сегментов случайным образом на определённый процент пользователей: допустим, прописать сегмент [MAIL_GPT] для 30% всех пользователей. 
* Также необходимо написать endpoint для API сервиса, через который по user_id возможно получить список сегментов, в которых состоит пользователь.

Требования и ограничения по проекту не установлены и могут быть сформулированы самостоятельно при необходимости.

#### Описание методов решения и причин их выбора

Описание можно посмотреть в файле [SOLUTION.md](SOLUTION.md)

#### Запуск приложения

**В любом случае, сначала пропишите**
```shell
make gen
```

*Запуск сервиса в докере:*

создайте в корне проекта файл .env с содержимым, как в .env.docker. Далее пропишите:
```shell
    make run-docker
```

*Запуск сервиса локально (эта возможность оставлена для ускорения дебага):*

создайте в корне проекта файл .env с содержимым, как в .env.local. Далее пропишите:
```shell
    make run-infra #запуск инфроструктуры 
```
подождите, пока запустится 

```shell
    make run-migrator #Мигратор
    make run-local #Сервис
```

В любом случае, приложение будет доступно на **localhost:9090**
Для ручного тестирования рекомендуется использовать Postman, предварительно загрузив в него файл /protos/proto/segmentation/segmentationService.proto

#### Полезные ссылки

UI кафки, через который можно руками посылать сообщения: http://localhost:8085
